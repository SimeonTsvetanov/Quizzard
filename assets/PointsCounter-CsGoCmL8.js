import{r as i,j as e,B as c,a5 as X,I as L,W as ue,T as I,f as W,C as re,ab as me,a9 as oe,D as Q,a as ae,b as V,e as se,Y as H,ac as xe,ad as pe,ae as he,af as fe,Z as ne,ag as ie,w as ge,ah as be,ai as P,aj as Y,ak as K,al as q,am as J,an as Z,L as Se,ao as je,ap as Ce,aq as le,ar as ve,i as ye,aa as we,V as ce}from"./mui-C3MZkJ_-.js";import{S as $}from"./index-_-JDN6r9.js";import"./vendor-DJG_os-6.js";const Te=["Quiz Khalifa","The Mighty Morphin Flower Arrangers","Agatha Quiztie","Les Quizerables","The Questionables","Trivia Newton John","Quiz Team Aguilera","50 Shades of Quiz","Game of Phones","The Quizzards of Oz","Quiz Me Maybe","The Brainy Bunch","Smarty Pints","The Think Tank","Quiz and Tell","The Answer is 42","Ctrl+Alt+Defeat","The WiFi Seekers","404 Team Not Found","The Googleheads","Byte Me","The Neural Network","Artificial Stupidity","The Data Miners","Cloud Nine","The Debugging Ducks","Syntax Errors","The Recursive Rebels","Boolean Operators","Stack Overflow Heroes"],G={MAX_TEAMS:20,DEFAULT_ROUNDS:5,MIN_SCORE:-999,MAX_SCORE:999,SCORE_DECIMAL_PLACES:2},ee=t=>{const o=Object.values(t.roundScores).reduce((r,s)=>r+s,0);return U(o)},Ie=t=>[...t].sort((o,r)=>r.totalScore-o.totalScore),Ae=t=>{var s;const o=Ie(t),r=((s=o[0])==null?void 0:s.totalScore)||0;return o.map((n,l)=>({position:l+1,team:n,pointsFromFirst:r-n.totalScore,isLeader:l===0}))},de=t=>!isNaN(t)&&t>=G.MIN_SCORE&&t<=G.MAX_SCORE,U=t=>Math.round(t*Math.pow(10,G.SCORE_DECIMAL_PLACES))/Math.pow(10,G.SCORE_DECIMAL_PLACES),_=t=>t%1===0?t.toString():t.toFixed(2),ke=()=>{const[t,o]=i.useState("OFF"),[r,s]=i.useState([]),[n,l]=i.useState(G.DEFAULT_ROUNDS),[a,x]=i.useState(1),[d,u]=i.useState(!1),[m,p]=i.useState(null),f=i.useCallback(()=>{p(null)},[]),h=i.useCallback(()=>{o("OFF"),s([]),l(G.DEFAULT_ROUNDS),x(1),u(!1),p(null)},[]),g=i.useCallback((b,A,R,C)=>{o(b),s(A),l(R),x(C),p(null)},[]),y=i.useMemo(()=>Ae(r),[r]);return{state:{gameStatus:t,teams:r,rounds:n,currentRound:a,isLoading:d,error:m},actions:{setGameStatus:o,setTeams:s,setRounds:l,setCurrentRound:x,setIsLoading:u,setError:p,clearError:f,resetToInitialState:h,initializeState:g},derived:{leaderboard:y}}},Ee=(t,o)=>{const{gameStatus:r,teams:s,rounds:n,currentRound:l}=t,{initializeState:a,resetToInitialState:x,setError:d}=o,u=i.useCallback(()=>{try{const p=localStorage.getItem($.PC_GAME_STATE);if(p){const f=JSON.parse(p);if(f.gameStatus&&Array.isArray(f.teams)&&typeof f.rounds=="number"&&f.rounds>0){a(f.gameStatus,f.teams,f.rounds,f.currentRound||1),console.log(`Restored ${f.gameStatus} game with ${f.teams.length} teams, ${f.rounds} rounds`);return}}console.log("No valid game state found, starting fresh"),x()}catch(p){console.error("Failed to load persisted game state:",p),x(),d("Failed to load saved game data")}},[a,x,d]),m=i.useCallback(()=>{try{const p={gameStatus:r,teams:s,rounds:n,currentRound:l,createdAt:Date.now(),updatedAt:Date.now()},f=localStorage.getItem($.PC_GAME_STATE);if(f)try{const h=JSON.parse(f);p.createdAt=h.createdAt||Date.now()}catch{}localStorage.setItem($.PC_GAME_STATE,JSON.stringify(p))}catch(p){console.error("Failed to save game state:",p),d("Failed to save game progress")}},[r,s,n,l,d]);return i.useEffect(()=>{const p=setTimeout(()=>{r==="ON"&&s.length>0&&m()},500);return()=>clearTimeout(p)},[r,s,n,l,m]),i.useEffect(()=>{u()},[u]),{loadPersistedState:u,saveGameState:m}},Re=(t,o)=>{const{teams:r,rounds:s,currentRound:n}=t,{setGameStatus:l,setTeams:a,setRounds:x,setCurrentRound:d,setIsLoading:u,setError:m,resetToInitialState:p}=o,f=i.useCallback((C,w)=>{u(!0),m(null);try{if(C.length<1||w<1){m("Fill minimum one Team and at least 1 Round"),u(!1);return}const S=C.map(k=>{const T={};for(let j=1;j<=w;j++)T[j]=0;return{...k,totalScore:0,roundScores:T}});a(S),x(w),d(1),l("ON"),console.log(`Started new game: ${C.length} teams, ${w} rounds`),setTimeout(()=>u(!1),300)}catch(S){console.error("Failed to start game:",S),m("Failed to start game"),u(!1)}},[u,m,a,x,d,l]),h=i.useCallback(()=>{u(!0),m(null);try{localStorage.removeItem($.PC_GAME_STATE),p(),console.log("Game ended, all data cleared"),setTimeout(()=>u(!1),300)}catch(C){console.error("Failed to end game:",C),m("Failed to end game"),u(!1)}},[u,m,p]),g=i.useCallback(()=>{m(null),console.log("Entered edit mode")},[m]),y=i.useCallback((C,w)=>{u(!0),m(null);try{if(C.length<1||w<1){m("Fill minimum one Team and at least 1 Round"),u(!1);return}const S=C.map(k=>{const T=r.find(j=>j.name===k.name);if(T){const j={...T.roundScores};for(let M=s+1;M<=w;M++)j[M]=0;return{...T,roundScores:j,totalScore:ee({...T,roundScores:j})}}else{const j={};for(let M=1;M<=w;M++)j[M]=0;return{...k,totalScore:0,roundScores:j}}});a(S),x(w),n>w&&d(w),console.log(`Updated game setup: ${C.length} teams, ${w} rounds`),setTimeout(()=>u(!1),300)}catch(S){console.error("Failed to update game setup:",S),m("Failed to update game setup"),u(!1)}},[r,s,n,u,m,a,x,d]),b=i.useCallback((C,w,S)=>{if(!de(S)){m(`Score must be between ${G.MIN_SCORE} and ${G.MAX_SCORE}`);return}const k=U(S);m(null),a(T=>T.map(j=>{if(j.id===C){const M={...j.roundScores,[w]:k},v=ee({...j,roundScores:M});return{...j,roundScores:M,totalScore:v}}return j}))},[m,a]),A=i.useCallback(C=>{C>=1&&C<=s?(d(C),m(null)):m(`Round must be between 1 and ${s}`)},[s,d,m]),R=i.useCallback(()=>{h()},[h]);return{startGame:f,endGame:h,enterEditMode:g,updateGameSetup:y,updateTeamScore:b,setCurrentRound:A,clearAllData:R}},ze=()=>{const{state:t,actions:o,derived:r}=ke();Ee(t,o);const s=Re(t,o);return{gameStatus:t.gameStatus,teams:t.teams,rounds:t.rounds,currentRound:t.currentRound,isLoading:t.isLoading,error:t.error,leaderboard:r.leaderboard,startGame:s.startGame,endGame:s.endGame,enterEditMode:s.enterEditMode,updateGameSetup:s.updateGameSetup,updateTeamScore:s.updateTeamScore,setCurrentRound:s.setCurrentRound,clearAllData:s.clearAllData,clearError:o.clearError}},De=t=>{const{gameStatus:o,existingTeams:r,existingRounds:s}=t,[n,l]=i.useState([]),[a,x]=i.useState(1),[d,u]=i.useState(""),[m,p]=i.useState(!1),[f,h]=i.useState(null),g=i.useRef(new Map),y=i.useRef(!1),b=parseInt(d)||0,A=o==="ON",R=n.filter(v=>v.value.trim()!==""),C=i.useMemo(()=>[...Te].sort(()=>Math.random()-.5),[]),w=i.useCallback(v=>C[v%C.length],[C]);i.useEffect(()=>{if(console.log("TeamSetup hook initializing:",{gameStatus:o,existingTeams:r,existingRounds:s}),A&&r&&r.length>0){console.log("Loading edit mode with existing teams:",r);const v=r.map((z,O)=>({id:O+1,value:z.name}));v.push({id:r.length+1,value:""}),l(v),x(r.length+2)}else{console.log("Creating fresh setup");const v=[{id:1,value:""}];console.log("Setting single empty team:",v),l(v),x(2)}u(A&&s?s.toString():""),h(null)},[A,r,s]);const S=i.useCallback(()=>n.filter(z=>z.value.trim()!=="").length<1||b<1?(h("Fill minimum one Team and at least 1 Round"),!1):(h(null),!0),[n,b]),k=i.useCallback((v,z)=>{var N;console.log("handleInputChange called:",{id:v,value:z}),h(null),l(D=>{const F=D.map(E=>E.id===v?{...E,value:z}:E);return console.log("Setting teams after input change:",F),F}),((N=n[n.length-1])==null?void 0:N.id)===v&&z.trim()&&n.length<G.MAX_TEAMS&&!y.current&&(console.log("Auto-adding new team input"),l(D=>[...D,{id:a,value:""}]),x(D=>D+1))},[n,a]),T=i.useCallback((v,z)=>{const O=n.findIndex(D=>D.id===v),N=n[O];if(z.key==="Enter"||z.key==="Tab")if(z.preventDefault(),y.current=!0,N!=null&&N.value.trim()){const D=O+1;if(D<n.length){const F=n[D],E=g.current.get(F.id);E==null||E.focus()}else if(n.length<G.MAX_TEAMS){const F={id:a,value:""};l(E=>[...E,F]),x(E=>E+1),setTimeout(()=>{const E=g.current.get(F.id);E==null||E.focus()},0)}setTimeout(()=>{y.current=!1},50)}else{const D=w(O);k(v,D),setTimeout(()=>{if(n.length<G.MAX_TEAMS){const E={id:a,value:""};l(B=>[...B,E]),x(B=>B+1)}const F=g.current.get(v);if(F){F.focus();const E=D.length;F.setSelectionRange(E,E)}setTimeout(()=>{y.current=!1},50)},0)}},[n,a,w,k]),j=i.useCallback(v=>{h(null),u(v.target.value)},[]),M=i.useCallback(v=>{n.length<=1||(l(z=>z.filter(O=>O.id!==v)),g.current.delete(v))},[n.length]);return{state:{teams:n,nextId:a,roundCountInput:d,clearDialogOpen:m,validationError:f,inputRefs:g},actions:{handleInputChange:k,handleKeyDown:T,handleRoundCountChange:j,removeTeam:M,getPlaceholderText:w,validateSetup:S,setClearDialogOpen:p,setValidationError:h},derivedValues:{roundCount:b,isEditMode:A,filledTeams:R}}},Me=({number:t,show:o})=>e.jsx(c,{sx:{minWidth:24,height:24,borderRadius:"50%",bgcolor:o?"primary.main":"transparent",color:o?"primary.contrastText":"transparent",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:600,flexShrink:0,transition:"all 0.2s ease",minHeight:24},children:o?t:""}),Fe=({state:t,actions:o})=>{const{teams:r,inputRefs:s}=t,{handleInputChange:n,handleKeyDown:l,removeTeam:a,getPlaceholderText:x}=o;return e.jsx(c,{sx:{flex:1,display:"flex",flexDirection:"column",gap:"clamp(0.25rem, 1vw, 0.5rem)",p:{xs:1,sm:2},pb:"clamp(0.25rem, 1vw, 0.75rem)",overflow:"auto",minHeight:0},children:r.map((d,u)=>{const m=d.value.trim()!=="",p=u+1,f=m||u===0,h=r.length>1&&m;return e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:"clamp(0.5rem, 1.5vw, 1rem)",py:"clamp(0.125rem, 0.5vw, 0.25rem)"},children:[e.jsx(Me,{number:p,show:f}),e.jsx(X,{inputRef:g=>{g?s.current.set(d.id,g):s.current.delete(d.id)},value:d.value,onChange:g=>n(d.id,g.target.value),onKeyDown:g=>l(d.id,g),placeholder:x(u),variant:"outlined",size:"small",sx:{flex:1,"& .MuiOutlinedInput-root":{"& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none"},bgcolor:"background.default",borderRadius:1,fontSize:"clamp(0.9rem, 2vw, 1rem)"}},"aria-label":`Team ${p} name input`,autoComplete:"off"}),e.jsx(L,{size:"small",onClick:()=>a(d.id),disabled:!h,sx:{opacity:m&&h?.7:0,transition:"opacity 0.2s ease",color:"error.main",flexShrink:0,"&:hover":{opacity:m&&h?1:0,bgcolor:"error.main",color:"error.contrastText"},"&.Mui-disabled":{opacity:0}},"aria-label":`Remove team ${p}`,title:`Remove team ${p}`,children:e.jsx(ue,{fontSize:"small"})})]},d.id)})})},We=({state:t,actions:o,roundCount:r,filledTeams:s,error:n,inputRef:l})=>{const{roundCountInput:a,validationError:x}=t,{handleRoundCountChange:d}=o,u=x&&r<1;return e.jsx(c,{sx:{flexShrink:0},children:e.jsxs(c,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-end"},children:[e.jsx(X,{inputRef:l,type:"number",value:a,onChange:d,placeholder:"0",variant:"outlined",size:"small",inputProps:{min:1,max:99,"aria-label":"Number of rounds"},sx:{width:80,"& .MuiOutlinedInput-root":{"& fieldset":{border:"none"},"&:hover fieldset":{border:"none"},"&.Mui-focused fieldset":{border:"none"},bgcolor:"background.default",borderRadius:1,fontSize:"clamp(0.9rem, 2vw, 1rem)"}}}),u&&e.jsx(I,{variant:"caption",sx:{color:"error.main",fontSize:"0.75rem",mt:.5,whiteSpace:"nowrap",textAlign:"right"},children:"Add rounds"})]})})},Ge=({onStartGame:t,onClearClick:o,isLoading:r,isEditMode:s})=>{const n=()=>r?"Processing...":s?"Continue Game":"Start Quiz Game";return e.jsx(c,{sx:{flexShrink:0,p:{xs:1,sm:2},pt:"clamp(0.25rem, 1vw, 0.75rem)"},children:e.jsxs(c,{sx:{display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},children:[e.jsx(W,{variant:"contained",startIcon:r?e.jsx(re,{size:20,color:"inherit"}):e.jsx(me,{}),onClick:t,disabled:r,sx:{px:{xs:4,sm:6},py:{xs:1.5,sm:1.25},fontSize:"clamp(0.8rem, 1.2vw, 0.875rem)",borderRadius:2,boxShadow:l=>l.shadows[2],"&:hover":{boxShadow:l=>l.shadows[4],transform:"translateY(-1px)",transition:"all 0.2s ease-in-out"},"&:active":{transform:"translateY(0px)"},"&.Mui-disabled":{boxShadow:l=>l.shadows[1],transform:"none"}},"aria-label":r?"Processing, please wait":n(),title:r?"Processing...":n(),children:n()}),e.jsx(L,{onClick:o,sx:{position:"absolute",right:0,bgcolor:"error.main",color:"error.contrastText","&:hover":{bgcolor:"error.dark",transform:"scale(1.1)",transition:"all 0.2s ease-in-out"},"&:active":{transform:"scale(1)"}},"aria-label":"Clear all data",title:"Clear all Points Counter data",children:e.jsx(oe,{})})]})})},Oe=({open:t,onClose:o,onConfirm:r})=>e.jsxs(Q,{open:t,onClose:o,maxWidth:"sm",PaperProps:{sx:{borderRadius:2}},children:[e.jsx(ae,{sx:{textAlign:"center",fontWeight:600,color:"error.main"},children:"Clear All Data?"}),e.jsx(V,{children:e.jsx(I,{variant:"body1",sx:{textAlign:"center",color:"text.secondary",lineHeight:1.6},children:"This will permanently delete all Points Counter data including saved teams, game states, and settings. This action cannot be undone."})}),e.jsxs(se,{sx:{justifyContent:"center",gap:2,p:2},children:[e.jsx(W,{variant:"outlined",onClick:o,children:"Cancel"}),e.jsx(W,{variant:"contained",color:"error",onClick:r,startIcon:e.jsx(oe,{}),children:"Clear All Data"})]})]}),te=({gameStatus:t,onStartGame:o,onUpdateSetup:r,onClearAllData:s,isLoading:n=!1,error:l,existingTeams:a,existingRounds:x})=>{const{state:d,actions:u,derivedValues:m}=De({gameStatus:t,existingTeams:a,existingRounds:x}),{clearDialogOpen:p,validationError:f}=d,{validateSetup:h,setClearDialogOpen:g}=u,{roundCount:y,isEditMode:b,filledTeams:A}=m,R=H.useRef(null),C=H.useCallback(()=>{if(!h()){y<1&&setTimeout(()=>{var T;(T=R.current)==null||T.focus()},100);return}const k=A.map((T,j)=>({id:`team-${Date.now()}-${j}`,name:T.value.trim(),totalScore:0,roundScores:{}}));b&&r?r(k,y):o(k,y)},[h,A,y,b,r,o]),w=H.useCallback(()=>{g(!1),s()},[g,s]),S=()=>b?"Edit Teams":"Teams Setup";return e.jsxs(c,{sx:{height:"calc(100vh - 100px)",minHeight:"480px",display:"flex",flexDirection:"column",bgcolor:"background.default",overflow:"hidden"},children:[e.jsx(c,{sx:{flex:1,display:"flex",justifyContent:"center",alignItems:"center",p:{xs:1,sm:2},overflow:"hidden"},children:e.jsx(c,{sx:{width:"100%",height:"100%",maxWidth:{xs:"calc(100vw - 16px)",sm:"clamp(280px, 50vw, 600px)"},display:"flex",flexDirection:"column"},children:e.jsxs(c,{sx:{flex:1,display:"flex",flexDirection:"column",bgcolor:"background.paper",borderRadius:3,boxShadow:4,overflow:"hidden"},children:[e.jsxs(c,{sx:{flexShrink:0,px:{xs:2,sm:3},py:{xs:2,sm:2.5},display:"flex",alignItems:"baseline",justifyContent:"space-between",gap:2},children:[e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(I,{variant:"body1",sx:{fontWeight:500,color:"text.primary",fontSize:"clamp(0.9rem, 2vw, 1rem)"},children:S()}),e.jsx(xe,{sx:{fontSize:"clamp(1rem, 2.2vw, 1.2rem)",color:"text.secondary",opacity:.6,ml:.5}})]}),e.jsxs(c,{sx:{display:"flex",alignItems:"baseline",gap:1},children:[e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:.25},children:[e.jsx(I,{variant:"body1",sx:{fontWeight:500,color:"text.primary",fontSize:"clamp(0.9rem, 2vw, 1rem)",whiteSpace:"nowrap"},children:"Rounds"}),e.jsx(pe,{sx:{fontSize:"clamp(0.9rem, 2vw, 1rem)",color:"text.secondary",opacity:.6,ml:.25}})]}),e.jsx(We,{state:d,actions:u,roundCount:y,filledTeams:A,error:l,inputRef:R})]})]}),e.jsx(Fe,{state:d,actions:u}),e.jsx(Ge,{isLoading:n,onStartGame:C,onClearClick:()=>g(!0),isEditMode:b})]})})}),e.jsx(Oe,{open:p,onClose:()=>g(!1),onConfirm:w})]})},Le=({currentRound:t,totalRounds:o,onRoundChange:r})=>{const s=()=>{t>1&&r(t-1)},n=()=>{t<o&&r(t+1)};return e.jsxs(c,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:{xs:1,sm:2},py:{xs:.75,sm:1},px:{xs:1,sm:2}},children:[e.jsx(L,{onClick:s,disabled:t<=1,size:"small",sx:{color:t<=1?"text.disabled":"primary.main",transition:"all 0.2s ease","&:hover":{backgroundColor:"action.hover"}},children:e.jsx(he,{})}),e.jsx(c,{sx:{display:"flex",alignItems:"center",gap:1,px:{xs:2,sm:3},py:{xs:.5,sm:1},backgroundColor:"primary.main",color:"primary.contrastText",borderRadius:1,minWidth:{xs:120,sm:140},justifyContent:"center"},children:e.jsxs(I,{variant:"body1",sx:{fontWeight:600,fontSize:"clamp(0.9rem, 2vw, 1.1rem)",textAlign:"center"},children:["Round ",t," of ",o]})}),e.jsx(L,{onClick:n,disabled:t>=o,size:"small",sx:{color:t>=o?"text.disabled":"primary.main",transition:"all 0.2s ease","&:hover":{backgroundColor:"action.hover"}},children:e.jsx(fe,{})})]})},Ne=({team:t,currentRound:o,onScoreUpdate:r})=>{const[s,n]=i.useState(""),[l,a]=i.useState(!1),[x,d]=i.useState(!1),[u,m]=i.useState(!1),[p,f]=i.useState(!1),h=i.useRef(null),g=i.useRef(null),y=t.roundScores[o]||0,b=()=>{if(h.current&&g.current){const S=h.current.scrollWidth,k=g.current.clientWidth;f(S>k)}};i.useEffect(()=>{n(y===0?"":y.toString()),a(!1)},[o,y]),i.useEffect(()=>{b();const S=()=>b();return window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)},[t.name]);const A=S=>{const k=S.target.value;if(n(k),k===""){a(!1);return}const T=parseFloat(k);if(isNaN(T)){a(!0);return}if(!de(T)){a(!0);return}a(!1);const j=U(T);r(t.id,o,j)},R=()=>{s===""?(r(t.id,o,0),a(!1)):l&&(n(y===0?"":y.toString()),a(!1))},C=S=>S%1===0?S.toString():S.toFixed(2),w=p&&(x||u);return e.jsx(ne,{onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onFocus:()=>m(!0),onBlur:()=>m(!1),tabIndex:0,sx:{height:{xs:145,sm:165},width:"100%",maxWidth:{xs:"100%",sm:240,md:220,lg:230},backgroundColor:"background.paper",boxShadow:"0 2px 8px rgba(0,0,0,0.08)",border:"1px solid",borderColor:x||u?"primary.main":"rgba(0,0,0,0.06)",borderRadius:3,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden",cursor:"pointer","&:hover":{boxShadow:"0 8px 24px rgba(0,0,0,0.12)",borderColor:"primary.main",transform:"translateY(-2px)"},"&:focus":{outline:"none",boxShadow:"0 8px 24px rgba(0,0,0,0.12)",borderColor:"primary.main",transform:"translateY(-2px)"},"&:before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"3px",background:"linear-gradient(90deg, #1976d2, #42a5f5)",opacity:x||u?1:0,transition:"opacity 0.3s ease"}},children:e.jsxs(ie,{sx:{height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",p:{xs:2,sm:2.5},"&:last-child":{pb:{xs:2,sm:2.5}}},children:[e.jsx(c,{ref:g,sx:{width:"100%",overflow:"hidden",position:"relative",mb:1.5,minHeight:"clamp(1.2rem, 2.6vw, 1.44rem)"},children:e.jsx(I,{ref:h,variant:"h6",sx:{fontSize:"clamp(1rem, 2.2vw, 1.2rem)",fontWeight:600,textAlign:"center",color:"text.primary",lineHeight:1.2,whiteSpace:"nowrap",...w&&{animation:"marqueeScroll 10s ease-in-out infinite","@keyframes marqueeScroll":{"0%":{transform:"translateX(0%)"},"8%":{transform:"translateX(0%)"},"50%":{transform:"translateX(-100%)"},"85%":{transform:"translateX(-100%)"},"100%":{transform:"translateX(0%)"}}},...!w&&{overflow:"hidden",textOverflow:"ellipsis"}},children:t.name})}),e.jsx(c,{sx:{width:"100%",display:"flex",justifyContent:"center",mb:1.5},children:e.jsx(X,{size:"small",type:"text",inputMode:"decimal",value:s,onChange:A,onBlur:R,onFocus:()=>m(!0),error:l,placeholder:"0",variant:"outlined",sx:{width:{xs:80,sm:90},"& .MuiOutlinedInput-root":{fontSize:"clamp(1.1rem, 2.8vw, 1.4rem)",fontWeight:600,borderRadius:2,backgroundColor:l?"rgba(244, 67, 54, 0.04)":"rgba(25, 118, 210, 0.04)",transition:"all 0.2s ease","& input":{textAlign:"center",py:{xs:.75,sm:1},px:{xs:.5,sm:.75},color:l?"error.main":"primary.main",fontWeight:600},"& fieldset":{borderColor:l?"error.main":"rgba(25, 118, 210, 0.2)",borderWidth:1.5},"&:hover fieldset":{borderColor:l?"error.main":"primary.main"},"&.Mui-focused fieldset":{borderColor:l?"error.main":"primary.main",borderWidth:2}}}})}),e.jsxs(I,{variant:"body2",sx:{fontSize:"clamp(0.85rem, 1.8vw, 0.95rem)",fontWeight:500,color:"text.secondary",textAlign:"center",letterSpacing:"0.5px"},children:["Total:"," ",e.jsx(c,{component:"span",sx:{color:"primary.main",fontWeight:700,fontSize:"clamp(0.9rem, 2vw, 1.05rem)"},children:C(t.totalScore)})]})]})})},Pe=({onShowLeaderboard:t,onCopyLeaderboard:o,onEditTeams:r,onShowEndGameDialog:s})=>{const n=ge();return be(n.breakpoints.down("sm"))?e.jsxs(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:1,width:"100%"},children:[e.jsx(P,{title:"View Leaderboard",arrow:!0,children:e.jsx(L,{onClick:t,color:"primary",sx:{width:48,height:48,fontSize:28,p:0,display:"flex",alignItems:"center",justifyContent:"center"},"aria-label":"View leaderboard",children:e.jsx(Y,{fontSize:"inherit",sx:{lineHeight:1,verticalAlign:"middle"}})})}),e.jsx(P,{title:"Copy Results",arrow:!0,children:e.jsx(L,{onClick:o,color:"info",sx:{width:48,height:48,fontSize:28,p:0,display:"flex",alignItems:"center",justifyContent:"center"},"aria-label":"Copy leaderboard to clipboard",children:e.jsx(K,{fontSize:"inherit",sx:{lineHeight:1,verticalAlign:"middle"}})})}),e.jsx(P,{title:"Edit Teams",arrow:!0,children:e.jsx(L,{onClick:r,color:"info",sx:{width:48,height:48,fontSize:28,p:0,display:"flex",alignItems:"center",justifyContent:"center"},"aria-label":"Edit teams and rounds",children:e.jsx(q,{fontSize:"inherit",sx:{lineHeight:1,verticalAlign:"middle"}})})}),e.jsx(P,{title:"End Game",arrow:!0,children:e.jsx(L,{onClick:s,color:"error",sx:{width:48,height:48,fontSize:28,p:0,display:"flex",alignItems:"center",justifyContent:"center"},"aria-label":"End current game",children:e.jsx(J,{fontSize:"inherit",sx:{lineHeight:1,verticalAlign:"middle"}})})})]}):e.jsxs(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",gap:{sm:1.5,md:2},flexWrap:"wrap",width:"100%"},children:[e.jsx(W,{variant:"contained",startIcon:e.jsx(Y,{}),onClick:t,sx:{fontSize:"clamp(0.8rem, 1.5vw, 0.875rem)",px:{sm:2,md:3},py:1,borderRadius:2,textTransform:"none",fontWeight:600},children:"Leaderboard"}),e.jsx(W,{variant:"outlined",startIcon:e.jsx(K,{}),onClick:o,color:"info",sx:{fontSize:"clamp(0.8rem, 1.5vw, 0.875rem)",px:{sm:2,md:3},py:1,borderRadius:2,textTransform:"none",fontWeight:500},children:"Copy"}),e.jsx(W,{variant:"outlined",startIcon:e.jsx(q,{}),onClick:r,color:"info",sx:{fontSize:"clamp(0.8rem, 1.5vw, 0.875rem)",px:{sm:2,md:3},py:1,borderRadius:2,textTransform:"none",fontWeight:500},children:"Edit"}),e.jsx(W,{variant:"outlined",startIcon:e.jsx(J,{}),onClick:s,color:"error",sx:{fontSize:"clamp(0.8rem, 1.5vw, 0.875rem)",px:{sm:2,md:3},py:1,borderRadius:2,textTransform:"none",fontWeight:500},children:"End Game"})]})},_e=t=>{switch(t){case 1:return{bgcolor:"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)",color:"#000",icon:"🥇",chipColor:"warning"};case 2:return{bgcolor:"linear-gradient(135deg, #C0C0C0 0%, #A9A9A9 100%)",color:"#000",icon:"🥈",chipColor:"default"};case 3:return{bgcolor:"linear-gradient(135deg, #CD7F32 0%, #A0522D 100%)",color:"#fff",icon:"🥉",chipColor:"default"};default:return{bgcolor:"background.paper",color:"text.primary",icon:null,chipColor:"default"}}},He=({teams:t,currentRound:o,totalRounds:r,showDetails:s=!1})=>{const n=H.useMemo(()=>{var d;const a=[...t].sort((u,m)=>m.totalScore-u.totalScore),x=((d=a[0])==null?void 0:d.totalScore)||0;return a.map((u,m)=>({position:m+1,team:u,pointsFromFirst:x-u.totalScore,isLeader:m===0}))},[t]),l=()=>r&&o===r?"Final Round":`Round ${o}`;return t.length===0?e.jsxs(c,{sx:{textAlign:"center",py:8,color:"text.secondary"},children:[e.jsx(Z,{sx:{fontSize:64,mb:2,opacity:.5}}),e.jsx(I,{variant:"h6",children:"No teams to display"}),e.jsx(I,{variant:"body2",children:"Start adding teams to see the leaderboard"})]}):e.jsxs(c,{sx:{width:"100%"},children:[s&&e.jsxs(c,{sx:{display:"flex",justifyContent:"space-around",mb:3,p:2,bgcolor:"rgba(25, 118, 210, 0.1)",borderRadius:2,border:"1px solid rgba(25, 118, 210, 0.2)"},children:[e.jsxs(c,{sx:{textAlign:"center"},children:[e.jsx(I,{variant:"h4",color:"primary",fontWeight:700,children:t.length}),e.jsx(I,{variant:"body2",color:"text.secondary",children:"Teams"})]}),e.jsxs(c,{sx:{textAlign:"center"},children:[e.jsx(I,{variant:"h4",color:"primary",fontWeight:700,children:l()}),e.jsx(I,{variant:"body2",color:"text.secondary",children:"Current Round"})]}),e.jsxs(c,{sx:{textAlign:"center"},children:[e.jsx(I,{variant:"h4",color:"primary",fontWeight:700,children:_(Math.max(...t.map(a=>a.totalScore)))}),e.jsx(I,{variant:"body2",color:"text.secondary",children:"Top Score"})]})]}),e.jsx(Se,{sx:{p:0,gap:2,display:"flex",flexDirection:"column"},children:n.map((a,x)=>{const d=_e(a.position);return e.jsxs(ne,{sx:{background:a.position<=3?d.bgcolor:"background.paper",border:a.isLeader?"2px solid #1976d2":"1px solid rgba(0,0,0,0.12)",borderRadius:3,overflow:"visible",position:"relative",transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:"0 8px 32px rgba(0,0,0,0.12)"}},children:[e.jsx(ie,{sx:{p:{xs:2,sm:3}},children:e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:{xs:2,sm:3}},children:[e.jsx(je,{sx:{width:{xs:50,sm:60},height:{xs:50,sm:60},bgcolor:a.position<=3?"rgba(255,255,255,0.9)":"primary.main",color:a.position<=3?"#000":"#fff",fontSize:"clamp(1.2rem, 3vw, 1.8rem)",fontWeight:700,border:a.isLeader?"3px solid #1976d2":"none"},children:d.icon||a.position}),e.jsxs(c,{sx:{flex:1,minWidth:0},children:[e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[e.jsx(I,{variant:"h6",sx:{fontSize:"clamp(1rem, 2.5vw, 1.3rem)",fontWeight:a.isLeader?700:600,color:d.color,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},children:a.team.name}),a.isLeader&&e.jsx(Ce,{sx:{color:"#FFD700",fontSize:"clamp(1rem, 2.5vw, 1.2rem)"}})]}),s&&a.pointsFromFirst>0&&e.jsxs(I,{variant:"body2",sx:{color:d.color,opacity:.8,fontSize:"clamp(0.75rem, 1.8vw, 0.85rem)"},children:[_(a.pointsFromFirst)," behind leader"]})]}),e.jsxs(c,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:1},children:[e.jsx(le,{label:_(a.team.totalScore),color:a.isLeader?"primary":d.chipColor,variant:a.isLeader?"filled":"outlined",sx:{fontSize:"clamp(0.9rem, 2vw, 1.1rem)",fontWeight:700,minWidth:{xs:70,sm:85},height:{xs:32,sm:36}}}),s&&a.team.totalScore>0&&e.jsxs(c,{sx:{display:"flex",alignItems:"center",gap:.5,color:d.color,opacity:.7},children:[e.jsx(ve,{sx:{fontSize:16}}),e.jsxs(I,{variant:"caption",children:[Object.keys(a.team.roundScores).length," rounds"]})]})]})]})}),a.isLeader&&e.jsxs(c,{sx:{position:"absolute",top:-8,right:16,bgcolor:"#1976d2",color:"white",px:1.5,py:.5,borderRadius:2,fontSize:"0.75rem",fontWeight:600,display:"flex",alignItems:"center",gap:.5,zIndex:1},children:[e.jsx(Z,{sx:{fontSize:14}}),"LEADER"]})]},a.team.id)})}),s&&t.length>3&&e.jsxs(e.Fragment,{children:[e.jsx(ye,{sx:{my:3}}),e.jsx(c,{sx:{textAlign:"center",py:2,bgcolor:"rgba(0,0,0,0.02)",borderRadius:2},children:e.jsxs(I,{variant:"body2",color:"text.secondary",children:[t.length," teams competing • ",l()," • Total points:"," ",_(t.reduce((a,x)=>a+x.totalScore,0))]})})]})]})},$e=({open:t,onClose:o,teams:r,currentRound:s,totalRounds:n,onCopyLeaderboard:l})=>{const a=()=>s===n?"Final Round":`Round ${s}`;return e.jsxs(Q,{open:t,onClose:o,maxWidth:!1,fullWidth:!0,PaperProps:{sx:{borderRadius:{xs:0,sm:3},maxHeight:{xs:"100vh",sm:"90vh"},width:{xs:"100vw",sm:"90vw"},maxWidth:{xs:"100vw",sm:"800px"},m:{xs:0,sm:2},display:"flex",flexDirection:"column"}},children:[e.jsxs(c,{sx:{background:"linear-gradient(135deg, #1976d2 0%, #42a5f5 100%)",color:"white",p:{xs:2,sm:3},borderRadius:{xs:0,sm:"12px 12px 0 0"},textAlign:"center",flexShrink:0},children:[e.jsx(I,{variant:"h4",sx:{fontSize:"clamp(1.5rem, 4vw, 2.2rem)",fontWeight:700,mb:1,display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:"🏆 Leaderboard"}),e.jsx(le,{label:a(),sx:{bgcolor:"rgba(255,255,255,0.2)",color:"white",fontWeight:600,fontSize:"clamp(0.85rem, 1.8vw, 1rem)",border:"1px solid rgba(255,255,255,0.3)"}})]}),e.jsx(V,{sx:{flex:1,p:0,overflow:"auto","&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.1)"},"&::-webkit-scrollbar-thumb":{background:"rgba(0,0,0,0.3)",borderRadius:"4px"}},children:e.jsx(c,{sx:{p:{xs:2,sm:3}},children:e.jsx(He,{teams:r,currentRound:s,totalRounds:n,showDetails:!0})})}),e.jsx(c,{sx:{flexShrink:0,borderTop:"1px solid",borderColor:"divider",bgcolor:"background.paper",p:{xs:2,sm:3},borderRadius:{xs:0,sm:"0 0 12px 12px"}},children:e.jsxs(c,{sx:{display:"flex",justifyContent:"center",gap:2,flexWrap:"wrap"},children:[e.jsx(W,{variant:"outlined",startIcon:e.jsx(we,{}),onClick:l,sx:{minWidth:{xs:"120px",sm:"140px"},fontSize:"clamp(0.85rem, 1.8vw, 0.95rem)"},children:"Copy to Clipboard"}),e.jsx(W,{variant:"contained",onClick:o,sx:{minWidth:{xs:"120px",sm:"140px"},fontSize:"clamp(0.85rem, 1.8vw, 0.95rem)"},children:"Close"})]})})]})},Be=({open:t,onClose:o,onConfirm:r})=>e.jsxs(Q,{open:t,onClose:o,maxWidth:"sm",PaperProps:{sx:{borderRadius:2}},children:[e.jsx(ae,{sx:{textAlign:"center",fontWeight:600,color:"error.main"},children:"End Game?"}),e.jsx(V,{children:e.jsx(I,{variant:"body1",sx:{textAlign:"center",color:"text.secondary",lineHeight:1.6},children:"Are you sure you want to end the current game? All progress will be lost."})}),e.jsxs(se,{sx:{justifyContent:"center",gap:2,p:2},children:[e.jsx(W,{variant:"outlined",onClick:o,sx:{border:"none"},children:"Cancel"}),e.jsx(W,{variant:"contained",color:"error",onClick:r,sx:{border:"none"},children:"End Game"})]})]}),Xe=({teams:t,rounds:o,currentRound:r,error:s,leaderboard:n,onScoreUpdate:l,onRoundChange:a,onEditTeams:x,onEndGame:d,onClearError:u})=>{const[m,p]=i.useState(!1),[f,h]=i.useState(!1),g=async()=>{try{const b=n.map((A,R)=>`${R+1}. ${A.team.name} - ${A.team.totalScore} points`).join(`
`);await navigator.clipboard.writeText(b),console.log("Leaderboard copied to clipboard")}catch(b){console.warn("Failed to copy leaderboard to clipboard:",b)}},y=()=>{h(!1),d()};return e.jsxs(c,{sx:{height:"calc(100vh - 100px)",minHeight:"480px",display:"flex",justifyContent:"center",alignItems:"flex-start",bgcolor:"background.default",px:{xs:1,sm:2},py:{xs:1,sm:2}},children:[e.jsx(c,{sx:{width:"100%",maxWidth:"clamp(280px, 90vw, 1200px)",height:"100%",display:"flex",flexDirection:"column"},children:e.jsxs(c,{sx:{flex:1,display:"flex",flexDirection:"column",bgcolor:"background.paper",borderRadius:3,boxShadow:3,overflow:"hidden"},children:[s&&e.jsx(c,{sx:{px:{xs:2,sm:3},pt:{xs:1.5,sm:2},pb:.5},children:e.jsx(ce,{severity:"error",onClose:u,sx:{fontSize:"clamp(0.8rem, 1.5vw, 0.875rem)",borderRadius:2,"& .MuiAlert-message":{display:"flex",alignItems:"center"}},children:s})}),e.jsx(c,{sx:{flexShrink:0,p:{xs:1,sm:2},pb:"clamp(0.25rem, 1vw, 0.75rem)"},children:e.jsx(Le,{currentRound:r,totalRounds:o,onRoundChange:a})}),e.jsx(c,{sx:{flex:1,px:{xs:1,sm:2},pb:{xs:1,sm:2},display:"flex",flexDirection:"column",alignItems:"center",overflow:"auto"},children:t.length>0?e.jsx(c,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:{xs:2,sm:3},width:"100%","@media (min-width: 600px)":{display:"grid",gridTemplateColumns:{sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},justifyItems:"center",alignItems:"stretch"}},children:t.map(b=>e.jsx(Ne,{team:b,currentRound:r,onScoreUpdate:l},b.id))}):e.jsx(c,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:e.jsx(I,{variant:"body1",color:"text.secondary",sx:{fontStyle:"italic"},children:"No teams configured"})})}),e.jsx(Pe,{onShowLeaderboard:()=>p(!0),onCopyLeaderboard:g,onEditTeams:x,onShowEndGameDialog:()=>h(!0)})]})}),e.jsx($e,{open:m,onClose:()=>p(!1),teams:t,currentRound:r,totalRounds:o,onCopyLeaderboard:g}),e.jsx(Be,{open:f,onClose:()=>h(!1),onConfirm:y})]})};function Ye(){const{gameStatus:t,isLoading:o,error:r,updateTeamScore:s,setCurrentRound:n,clearError:l,startGame:a,endGame:x,enterEditMode:d,updateGameSetup:u,clearAllData:m,teams:p,rounds:f,currentRound:h,leaderboard:g}=ze(),[y,b]=i.useState(!1),A=i.useCallback((T,j)=>{a(T,j),b(!1)},[a]),R=i.useCallback((T,j)=>{u(T,j),b(!1)},[u]),C=i.useCallback(()=>{d(),b(!0)},[d]),w=i.useCallback(()=>{x(),b(!1)},[x]),S=i.useCallback(()=>{m(),b(!1)},[m]);return o?e.jsxs(c,{sx:{height:"calc(100vh - 100px)",minHeight:"480px",display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:2,bgcolor:"background.default"},children:[e.jsx(re,{size:40}),e.jsx(c,{sx:{textAlign:"center",color:"text.secondary"},children:"Loading Points Counter..."})]}):r&&!y&&t==="OFF"?e.jsx(c,{sx:{height:"calc(100vh - 100px)",minHeight:"480px",display:"flex",justifyContent:"center",alignItems:"center",px:2,bgcolor:"background.default"},children:e.jsx(ce,{severity:"error",onClose:l,sx:{maxWidth:400,"& .MuiAlert-message":{fontSize:"clamp(0.9rem, 2vw, 1rem)"}},children:r})}):t==="OFF"||y?e.jsx(te,{gameStatus:t,onStartGame:A,onUpdateSetup:t==="ON"?R:void 0,onClearAllData:S,isLoading:o,error:r,existingTeams:t==="ON"?p:void 0,existingRounds:t==="ON"?f:void 0}):t==="ON"?e.jsx(Xe,{gameState:t,teams:p,rounds:f,currentRound:h,error:r,leaderboard:g,onScoreUpdate:s,onRoundChange:n,onEditTeams:C,onEndGame:w,onClearError:l}):e.jsx(te,{gameStatus:"OFF",onStartGame:A,onClearAllData:S,isLoading:o,error:r})}export{Ye as default};
//# sourceMappingURL=PointsCounter-CsGoCmL8.js.map
